# arc_twitter_intents v1.0-dev
# <a href="http://www.twitter.com">Twitter</a> for Textpattern
# Andy Carter
# http://redhotchilliproject.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE5OiJhcmNfdHdpdHRlcl9pbnRlbnRzIjtzOjc6InZlcnNp
b24iO3M6NzoiMS4wLWRldiI7czo2OiJhdXRob3IiO3M6MTE6IkFuZHkgQ2FydGVyIjtzOjEw
OiJhdXRob3JfdXJpIjtzOjMxOiJodHRwOi8vcmVkaG90Y2hpbGxpcHJvamVjdC5jb20vIjtz
OjExOiJkZXNjcmlwdGlvbiI7czo2MDoiPGEgaHJlZj0iaHR0cDovL3d3dy50d2l0dGVyLmNv
bSI+VHdpdHRlcjwvYT4gZm9yIFRleHRwYXR0ZXJuIjtzOjU6Im9yZGVyIjtzOjE6IjUiO3M6
NDoidHlwZSI7czoxOiIwIjtzOjU6ImZsYWdzIjtzOjE6IjMiO3M6NDoiaGVscCI7czo2OToi
CTxoMSBjbGFzcz0idGl0bGUiPjxzcGFuIGNsYXNzPSJjYXBzIj5UWFA8L3NwYW4+IFR3ZWV0
IEludGVudHM8L2gxPgoKIjtzOjQ6ImNvZGUiO3M6MzU4MjoiZ2xvYmFsICRwcmVmcywkdHhw
Y2ZnOwoKLy8gYXJjX3R3aXR0ZXJfaW50ZW50cyByZXF1aXJlcyBhcmNfdHdpdHRlciB2MyBv
ciBoaWdoZXIKcmVxdWlyZV9wbHVnaW4oJ2FyY190d2l0dGVyJyk7CgpmdW5jdGlvbiBhcmNf
dHdpdHRlcl9pbnRlbnRfZm9sbG93KCRhdHRzLCAkdGhpbmc9bnVsbCkKewogICAgZ2xvYmFs
ICRwcmVmczsKCiAgICBleHRyYWN0KGxBdHRzKGFycmF5KAogICAgICAgICd1c2VyJyAgICAg
ID0+ICRwcmVmc1snYXJjX3R3aXR0ZXJfdXNlciddLAogICAgICAgICd1c2VyX2lkJyAgID0+
ICcnLAogICAgICAgICdsYW5nJyAgICAgID0+ICcnLAogICAgICAgICdpbmNsdWRlX2pzJz0+
IHRydWUsCiAgICAgICAgJ2NsYXNzJyAgICAgPT4gJycKICAgICksJGF0dHMpKTsKCiAgICAk
cSA9ICgkdXNlcl9pZCkgPyAndXNlcl9pZD0nLiR1c2VyX2lkIDogJ3NjcmVlbl9uYW1lPScu
JHVzZXI7CgogICAgc3dpdGNoICgkbGFuZykgewogICAgICBjYXNlICdmcic6IGJyZWFrOyBj
YXNlICdpdCc6IGJyZWFrOyBjYXNlICdlcyc6IGJyZWFrOwogICAgICBjYXNlICdrbyc6IGJy
ZWFrOyBjYXNlICdqcCc6IGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgICRsYW5nID0g
J2VuJzsKICAgIH0KICAgICRxIC49ICcmYW1wO2xhbmc9Jy51cmxlbmNvZGUoJGxhbmcpOwoK
ICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdXNl
cj8nLiRxCiAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3MuJyInKTsKCiAgICAkanMgPSAoJGlu
Y2x1ZGVfanMpID8gX2FyY190d2l0dGVyX3dpZGdldF9qcygpIDogJyc7CgogICAgcmV0dXJu
ICRqcy4kaHRtbDsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X2Zhdm9yaXRlKCRh
dHRzLCAkdGhpbmc9bnVsbCkKewogICAgZ2xvYmFsICRwcmVmcywgJHRoaXNhcnRpY2xlOwoK
ICAgIGV4dHJhY3QobEF0dHMoYXJyYXkoCiAgICAgICAgJ3VzZXInICAgICAgPT4gJHByZWZz
WydhcmNfdHdpdHRlcl91c2VyJ10sCiAgICAgICAgJ3JlbGF0ZWQnICAgPT4gJycsCiAgICAg
ICAgJ2luY2x1ZGVfanMnPT4gdHJ1ZSwKICAgICAgICAnaWQnICAgICAgICA9PiAnJywKICAg
ICAgICAnY2xhc3MnICAgICA9PiAnJwogICAgKSwkYXR0cykpOwoKICAgIGlmICgkaWQgfHwg
JHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoKICAgICAgJHEgPSAncmVsYXRlZD0nLiR1c2Vy
OwogICAgICBpZiAoJHJlbGF0ZWQpICRxIC49IHVybGVuY29kZSgoJHE/JywnOidyZWxhdGVk
PScpLiRyZWxhdGVkKTsKCiAgICAgIGlmICghJGlkKSB7CiAgICAgICAgJHJvdyA9IHNhZmVf
cm93KCJ0d2VldF9pZCIKICAgICAgICAsICdhcmNfdHdpdHRlcicsICJhcnRpY2xlX2lkPXsk
dGhpc2FydGljbGVbJ3RoaXNpZCddfSIpOwogICAgICAgIGlmICghJGlkID0gJHJvd1sndHdl
ZXRfaWQnXSkgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAkcSAuPSAnJmFtcDt0d2Vl
dF9pZD0nLiRpZDsKCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVy
LmNvbS9pbnRlbnQvZmF2b3JpdGU/Jy4kcQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3Mu
JyInKTsKCiAgICAgICRqcyA9ICgkaW5jbHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0
X2pzKCkgOiAnJzsKCiAgICAgIHJldHVybiAkanMuJGh0bWw7CgogICAgfQoKICAgIHJldHVy
biBmYWxzZTsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X3JldHdlZXQoJGF0dHMs
ICR0aGluZz1udWxsKQp7CiAgICBnbG9iYWwgJHByZWZzLCAkdGhpc2FydGljbGU7CgogICAg
ZXh0cmFjdChsQXR0cyhhcnJheSgKICAgICAgICAndXNlcicgICAgICA9PiAkcHJlZnNbJ2Fy
Y190d2l0dGVyX3VzZXInXSwKICAgICAgICAncmVsYXRlZCcgICA9PiAnJywKICAgICAgICAn
aW5jbHVkZV9qcyc9PiB0cnVlLAogICAgICAgICdpZCcgICAgICAgID0+ICcnLAogICAgICAg
ICdjbGFzcycgICAgID0+ICcnCiAgICApLCRhdHRzKSk7CgogICAgaWYgKCRpZCB8fCAkdGhp
c2FydGljbGVbJ3RoaXNpZCddKSB7CgogICAgICAkcSA9ICdyZWxhdGVkPScuJHVzZXI7CiAg
ICAgIGlmICgkcmVsYXRlZCkgJHEgLj0gdXJsZW5jb2RlKCgkcT8nLCc6J3JlbGF0ZWQ9Jyku
JHJlbGF0ZWQpOwoKICAgICAgaWYgKCEkaWQpIHsKICAgICAgICAkcm93ID0gc2FmZV9yb3co
InR3ZWV0X2lkIgogICAgICAgICwgJ2FyY190d2l0dGVyJywgImFydGljbGVfaWQ9eyR0aGlz
YXJ0aWNsZVsndGhpc2lkJ119Iik7CiAgICAgICAgaWYgKCEkaWQgPSAkcm93Wyd0d2VldF9p
ZCddKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgICRxIC49ICcmYW1wO3R3ZWV0X2lk
PScuJGlkOwoKICAgICAgJGh0bWwgPSBocmVmKCR0aGluZywnaHR0cDovL3R3aXR0ZXIuY29t
L2ludGVudC9yZXR3ZWV0PycuJHEKICAgICAgICAsICcgY2xhc3M9IicuJGNsYXNzLiciJyk7
CgogICAgICAkanMgPSAoJGluY2x1ZGVfanMpID8gX2FyY190d2l0dGVyX3dpZGdldF9qcygp
IDogJyc7CgogICAgICByZXR1cm4gJGpzLiRodG1sOwoKICAgIH0KCiAgICByZXR1cm4gZmFs
c2U7Cn0KCmZ1bmN0aW9uIGFyY190d2l0dGVyX2ludGVudF9yZXBseSgkYXR0cywgJHRoaW5n
PW51bGwpCnsKICAgIGdsb2JhbCAkcHJlZnMsICR0aGlzYXJ0aWNsZTsKCiAgICBleHRyYWN0
KGxBdHRzKGFycmF5KAogICAgICAgICd1c2VyJyAgICAgID0+ICRwcmVmc1snYXJjX3R3aXR0
ZXJfdXNlciddLAogICAgICAgICdyZWxhdGVkJyAgID0+ICcnLAogICAgICAgICd0ZXh0JyAg
ICAgID0+ICcnLAogICAgICAgICdpbmNsdWRlX2pzJz0+IHRydWUsCiAgICAgICAgJ2lkJyAg
ICAgICAgPT4gJycsCiAgICAgICAgJ2NsYXNzJyAgICAgPT4gJycKICAgICksJGF0dHMpKTsK
CiAgICBpZiAoJGlkIHx8ICR0aGlzYXJ0aWNsZVsndGhpc2lkJ10pIHsKCiAgICAgIGlmICgh
JGlkKSB7CiAgICAgICAgJHJvdyA9IHNhZmVfcm93KCJ0d2VldF9pZCIKICAgICAgICAsICdh
cmNfdHdpdHRlcicsICJhcnRpY2xlX2lkPXskdGhpc2FydGljbGVbJ3RoaXNpZCddfSIpOwog
ICAgICAgIGlmICghJGlkID0gJHJvd1sndHdlZXRfaWQnXSkgcmV0dXJuIGZhbHNlOwogICAg
ICB9CgogICAgICAkcSA9ICdpbl9yZXBseV90bz0nLiRpZDsKCiAgICAgIGlmICgkdXNlcikg
ewogICAgICAgICRxIC49ICcmYW1wO3JlbGF0ZWQ9Jy51cmxlbmNvZGUoJHVzZXIpOwogICAg
ICB9CiAgICAgIGlmICgkcmVsYXRlZCkgewogICAgICAgICRxIC49IHVybGVuY29kZSgoJHVz
ZXI/JywnOicmcmVsYXRlZD0nKS4kcmVsYXRlZCk7CiAgICAgIH0KICAgICAgaWYgKCR0ZXh0
KSB7CiAgICAgICAgJHEgLj0gJyZhbXA7dGV4dD0nLnVybGVuY29kZSgkdGV4dCk7CiAgICAg
IH0KCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRl
bnQvdHdlZXQ/Jy4kcQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3MuJyInKTsKCiAgICAg
ICRqcyA9ICgkaW5jbHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0X2pzKCkgOiAnJzsK
CiAgICAgIHJldHVybiAkanMuJGh0bWw7CgogICAgfQoKICAgIHJldHVybiBmYWxzZTsKfQoK
IjtzOjM6Im1kNSI7czozMjoiNTNiYjJlNTM0MGJhM2ZkNDAxMWUzMmEzNDI0ZTA1NDMiO30=
