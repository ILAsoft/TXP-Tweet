# arc_twitter_intents v1.0-dev
# <a href="http://www.twitter.com">Twitter</a> for Textpattern
# Andy Carter
# http://redhotchilliproject.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE5OiJhcmNfdHdpdHRlcl9pbnRlbnRzIjtzOjc6InZlcnNp
b24iO3M6NzoiMS4wLWRldiI7czo2OiJhdXRob3IiO3M6MTE6IkFuZHkgQ2FydGVyIjtzOjEw
OiJhdXRob3JfdXJpIjtzOjMxOiJodHRwOi8vcmVkaG90Y2hpbGxpcHJvamVjdC5jb20vIjtz
OjExOiJkZXNjcmlwdGlvbiI7czo2MDoiPGEgaHJlZj0iaHR0cDovL3d3dy50d2l0dGVyLmNv
bSI+VHdpdHRlcjwvYT4gZm9yIFRleHRwYXR0ZXJuIjtzOjU6Im9yZGVyIjtzOjE6IjUiO3M6
NDoidHlwZSI7czoxOiIwIjtzOjU6ImZsYWdzIjtzOjE6IjMiO3M6NDoiaGVscCI7czo2OToi
CTxoMSBjbGFzcz0idGl0bGUiPjxzcGFuIGNsYXNzPSJjYXBzIj5UWFA8L3NwYW4+IFR3ZWV0
IEludGVudHM8L2gxPgoKIjtzOjQ6ImNvZGUiO3M6MjcyMzoiZ2xvYmFsICRwcmVmcywkdHhw
Y2ZnOwoKLy8gYXJjX3R3aXR0ZXJfaW50ZW50cyByZXF1aXJlcyBhcmNfdHdpdHRlciB2MyBv
ciBoaWdoZXIKcmVxdWlyZV9wbHVnaW4oJ2FyY190d2l0dGVyJyk7CgpmdW5jdGlvbiBhcmNf
dHdpdHRlcl9pbnRlbnRfZm9sbG93KCRhdHRzLCAkdGhpbmc9bnVsbCkKewogICAgZ2xvYmFs
ICRwcmVmczsKCiAgICBleHRyYWN0KGxBdHRzKGFycmF5KAogICAgICAgICd1c2VyJyAgICAg
ID0+ICRwcmVmc1snYXJjX3R3aXR0ZXJfdXNlciddLAogICAgICAgICd1c2VyX2lkJyAgID0+
ICcnLAogICAgICAgICdsYW5nJyAgICAgID0+ICcnLAogICAgICAgICdpbmNsdWRlX2pzJz0+
IHRydWUsCiAgICAgICAgJ2NsYXNzJyAgICAgPT4gJycKICAgICksJGF0dHMpKTsKCiAgICAk
cSA9ICgkdXNlcl9pZCkgPyAndXNlcl9pZD0nLiR1c2VyX2lkIDogJ3NjcmVlbl9uYW1lPScu
JHVzZXI7CgogICAgc3dpdGNoICgkbGFuZykgewogICAgICBjYXNlICdmcic6IGJyZWFrOyBj
YXNlICdpdCc6IGJyZWFrOyBjYXNlICdlcyc6IGJyZWFrOwogICAgICBjYXNlICdrbyc6IGJy
ZWFrOyBjYXNlICdqcCc6IGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgICRsYW5nID0g
J2VuJzsKICAgIH0KICAgICRxIC49ICcmYW1wO2xhbmc9Jy51cmxlbmNvZGUoJGxhbmcpOwoK
ICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdXNl
cj8nLiRxCiAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3MuJyInKTsKCiAgICAkanMgPSAoJGlu
Y2x1ZGVfanMpID8gX2FyY190d2l0dGVyX3dpZGdldF9qcygpIDogJyc7CgogICAgcmV0dXJu
ICRqcy4kaHRtbDsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X2Zhdm9yaXRlKCRh
dHRzLCAkdGhpbmc9bnVsbCkKewogICAgZ2xvYmFsICRwcmVmcywgJHRoaXNhcnRpY2xlOwoK
ICAgIGV4dHJhY3QobEF0dHMoYXJyYXkoCiAgICAgICAgJ3VzZXInICAgICAgPT4gJHByZWZz
WydhcmNfdHdpdHRlcl91c2VyJ10sCiAgICAgICAgJ3JlbGF0ZWQnICAgPT4gJycsCiAgICAg
ICAgJ2luY2x1ZGVfanMnPT4gdHJ1ZSwKICAgICAgICAnaWQnICAgICAgICA9PiAnJywKICAg
ICAgICAnY2xhc3MnICAgICA9PiAnJwogICAgKSwkYXR0cykpOwoKICAgIGlmICgkaWQgfHwg
JHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoKICAgICAgJHEgPSAncmVsYXRlZD0nLiR1c2Vy
OwogICAgICBpZiAoJHJlbGF0ZWQpICRxIC49IHVybGVuY29kZSgoJHE/JywnOidyZWxhdGVk
PScpLiRyZWxhdGVkKTsKCiAgICAgIGlmICghJGlkKSB7CiAgICAgICAgJHJvdyA9IHNhZmVf
cm93KCJ0d2VldF9pZCIKICAgICAgICAsICdhcmNfdHdpdHRlcicsICJhcnRpY2xlX2lkPXsk
dGhpc2FydGljbGVbJ3RoaXNpZCddfSIpOwogICAgICAgIGlmICghJGlkID0gJHJvd1sndHdl
ZXRfaWQnXSkgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICAkcSAuPSAnJmFtcDt0d2Vl
dF9pZD0nLiRpZDsKCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVy
LmNvbS9pbnRlbnQvZmF2b3JpdGU/Jy4kcQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3Mu
JyInKTsKCiAgICAgICRqcyA9ICgkaW5jbHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0
X2pzKCkgOiAnJzsKCiAgICAgIHJldHVybiAkanMuJGh0bWw7CgogICAgfQoKICAgIHJldHVy
biBmYWxzZTsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X3JlcGx5KCRhdHRzLCAk
dGhpbmc9bnVsbCkKewogICAgZ2xvYmFsICRwcmVmcywgJHRoaXNhcnRpY2xlOwoKICAgIGV4
dHJhY3QobEF0dHMoYXJyYXkoCiAgICAgICAgJ3VzZXInICAgICAgPT4gJHByZWZzWydhcmNf
dHdpdHRlcl91c2VyJ10sCiAgICAgICAgJ3JlbGF0ZWQnICAgPT4gJycsCiAgICAgICAgJ3Rl
eHQnICAgICAgPT4gJycsCiAgICAgICAgJ2luY2x1ZGVfanMnPT4gdHJ1ZSwKICAgICAgICAn
aWQnICAgICAgICA9PiAnJywKICAgICAgICAnY2xhc3MnICAgICA9PiAnJwogICAgKSwkYXR0
cykpOwoKICAgIGlmICgkaWQgfHwgJHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoKICAgICAg
aWYgKCEkaWQpIHsKICAgICAgICAkcm93ID0gc2FmZV9yb3coInR3ZWV0X2lkIgogICAgICAg
ICwgJ2FyY190d2l0dGVyJywgImFydGljbGVfaWQ9eyR0aGlzYXJ0aWNsZVsndGhpc2lkJ119
Iik7CiAgICAgICAgaWYgKCEkaWQgPSAkcm93Wyd0d2VldF9pZCddKSByZXR1cm4gZmFsc2U7
CiAgICAgIH0KCiAgICAgICRxID0gJ2luX3JlcGx5X3RvPScuJGlkOwoKICAgICAgaWYgKCR1
c2VyKSB7CiAgICAgICAgJHEgLj0gJyZhbXA7cmVsYXRlZD0nLnVybGVuY29kZSgkdXNlcik7
CiAgICAgIH0KICAgICAgaWYgKCRyZWxhdGVkKSB7CiAgICAgICAgJHEgLj0gdXJsZW5jb2Rl
KCgkdXNlcj8nLCc6JyZyZWxhdGVkPScpLiRyZWxhdGVkKTsKICAgICAgfQogICAgICBpZiAo
JHRleHQpIHsKICAgICAgICAkcSAuPSAnJmFtcDt0ZXh0PScudXJsZW5jb2RlKCR0ZXh0KTsK
ICAgICAgfQoKICAgICAgJGh0bWwgPSBocmVmKCR0aGluZywnaHR0cDovL3R3aXR0ZXIuY29t
L2ludGVudC90d2VldD8nLiRxCiAgICAgICAgLCAnIGNsYXNzPSInLiRjbGFzcy4nIicpOwoK
ICAgICAgJGpzID0gKCRpbmNsdWRlX2pzKSA/IF9hcmNfdHdpdHRlcl93aWRnZXRfanMoKSA6
ICcnOwoKICAgICAgcmV0dXJuICRqcy4kaHRtbDsKCiAgICB9CgogICAgcmV0dXJuIGZhbHNl
Owp9CgoiO3M6MzoibWQ1IjtzOjMyOiI2MGI3NGNmNzBlODg2NjFkMGRhNWY3YWVkMmIwNzRl
OSI7fQ==
