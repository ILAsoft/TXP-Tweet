# arc_twitter_intents v1.0
# Twitter Web Intents
# Andy Carter
# http://redhotchilliproject.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo0OiJuYW1lIjtzOjE5OiJhcmNfdHdpdHRlcl9pbnRlbnRzIjtzOjc6InZlcnNp
b24iO3M6MzoiMS4wIjtzOjY6ImF1dGhvciI7czoxMToiQW5keSBDYXJ0ZXIiO3M6MTA6ImF1
dGhvcl91cmkiO3M6MzE6Imh0dHA6Ly9yZWRob3RjaGlsbGlwcm9qZWN0LmNvbS8iO3M6MTE6
ImRlc2NyaXB0aW9uIjtzOjE5OiJUd2l0dGVyIFdlYiBJbnRlbnRzIjtzOjU6Im9yZGVyIjtz
OjE6IjUiO3M6NDoidHlwZSI7czoxOiIwIjtzOjU6ImZsYWdzIjtzOjE6IjMiO3M6NDoiaGVs
cCI7czo0NzY5OiIJPGgxIGNsYXNzPSJ0aXRsZSI+PHNwYW4gY2xhc3M9ImNhcHMiPlRYUDwv
c3Bhbj4gVHdlZXQgSW50ZW50czwvaDE+CgoJPHA+YXJjX3R3aXR0ZXJfaW50ZW50cyByZXF1
aXJlcyBhcmNfdHdpdHRlciB2MyBvciBoaWdoZXIgdG8gd29yay48L3A+CgoJPGgyIGNsYXNz
PSJzZWN0aW9uIj5UaGUgYXJjX3R3aXR0ZXJfaW50ZW50X2ZvbGxvdyB0YWc8L2gyPgoKCTxo
Mz5TeW50YXg8L2gzPgoKCTxwPiZsdDt0eHA6YXJjX3R3aXR0ZXJfaW50ZW50X2ZvbGxvdyZn
dDtGb2xsb3cmbHQ7L3R4cDphcmNfdHdpdHRlcl9pbnRlbnRfZm9sbG93Jmd0OzwvcD4KCgk8
aDM+VXNhZ2U8L2gzPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRyaWJ1dGU8L3RoPgoJ
CQk8dGg+RGVzY3JpcHRpb248L3RoPgoJCQk8dGg+RGVmYXVsdDwvdGg+CgkJCTx0aD5FeGFt
cGxlPC90aD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRl
ciB1c2VyIG5hbWUgdG8gZm9sbG93PC90ZD4KCQkJPHRkPiA8ZW0+YXJjX3R3aXR0ZXIgdXNl
cm5hbWU8L2VtPjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2RybW9ua2V5bmluamEmcXVvdDs8
L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+dXNlcl9pZDwvdGQ+CgkJCTx0ZD5Ud2l0dGVy
IHVzZXIgaWQgdG8gZm9sbG93IChvdmVycmlkZXMgdGhlIHVzZXIgYXR0cmlidXRlKTwvdGQ+
CgkJCTx0ZD4gPGVtPmFyY190d2l0dGVyIHVzZXJuYW1lPC9lbT48L3RkPgoJCQk8dGQ+dXNl
cj0mcXVvdDtkcm1vbmtleW5pbmphJnF1b3Q7PC90ZD4KCQk8L3RyPgoJPC90YWJsZT4KCgk8
aDIgY2xhc3M9InNlY3Rpb24iPlRoZSBhcmNfdHdpdHRlcl9pbnRlbnRfZmF2b3JpdGUgdGFn
PC9oMj4KCgk8aDM+U3ludGF4PC9oMz4KCgk8cD4mbHQ7dHhwOmFyY190d2l0dGVyX2ludGVu
dF9mYXZvcml0ZSZndDtGYXZvcml0ZSZsdDsvdHhwOmFyY190d2l0dGVyX2ludGVudF9mYXZv
cml0ZSZndDs8L3A+CgoJPGgzPlVzYWdlPC9oMz4KCgk8dGFibGU+CgkJPHRyPgoJCQk8dGg+
QXR0cmlidXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9uPC90aD4KCQkJPHRoPkRlZmF1bHQ8
L3RoPgoJCQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5pZDwvdGQ+
CgkJCTx0ZD5Ud2VldCBpZCB0byBmYXZvdXJpdGU8L3RkPgoJCQk8dGQ+IDxlbT5hcnRpY2xl
JiM4MjE3O3MgYXNzb2NpYXRlZCB0d2VldCBmcm9tIGFyY190d2l0dGVyPC9lbT48L3RkPgoJ
CTwvdHI+CgkJPHRyPgoJCQk8dGQ+dXNlcjwvdGQ+CgkJCTx0ZD5Ud2l0dGVyIHVzZXIgbmFt
ZSByZWxhdGVkIHRvIHR3ZWV0PC90ZD4KCQkJPHRkPiA8ZW0+YXJjX3R3aXR0ZXIgdXNlcm5h
bWU8L2VtPjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2RybW9ua2V5bmluamEmcXVvdDs8L3Rk
PgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+cmVsYXRlZDwvdGQ+CgkJCTx0ZD5Db21tYSBzZXBh
cmF0ZWQgbGlzdCBvZiByZWxhdGVkIFR3aXR0ZXIgdXNlcnMgdG8gcmVjb21tZW5kIGZvbGxv
d2luZzwvdGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48L3RkPgoJCQk8dGQ+cmVsYXRlZD0m
cXVvdDt0ZXh0cGF0dGVybiwgdHdpdHRlciZxdW90OzwvdGQ+CgkJPC90cj4KCTwvdGFibGU+
CgoJPGgyIGNsYXNzPSJzZWN0aW9uIj5UaGUgYXJjX3R3aXR0ZXJfaW50ZW50X3JldHdlZXQg
dGFnPC9oMj4KCgk8aDM+U3ludGF4PC9oMz4KCgk8cD4mbHQ7dHhwOmFyY190d2l0dGVyX2lu
dGVudF9yZXR3ZWV0Jmd0O1JldHdlZXQmbHQ7L3R4cDphcmNfdHdpdHRlcl9pbnRlbnRfcmV0
d2VldCZndDs8L3A+CgoJPGgzPlVzYWdlPC9oMz4KCgk8dGFibGU+CgkJPHRyPgoJCQk8dGg+
QXR0cmlidXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9uPC90aD4KCQkJPHRoPkRlZmF1bHQ8
L3RoPgoJCQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5pZDwvdGQ+
CgkJCTx0ZD5Ud2VldCBpZCB0byByZXR3ZWV0PC90ZD4KCQkJPHRkPiA8ZW0+YXJ0aWNsZSYj
ODIxNztzIGFzc29jaWF0ZWQgdHdlZXQgZnJvbSBhcmNfdHdpdHRlcjwvZW0+PC90ZD4KCQk8
L3RyPgoJCTx0cj4KCQkJPHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRlciB1c2VyIG5hbWUg
cmVsYXRlZCB0byB0d2VldDwvdGQ+CgkJCTx0ZD4gPGVtPmFyY190d2l0dGVyIHVzZXJuYW1l
PC9lbT48L3RkPgoJCQk8dGQ+dXNlcj0mcXVvdDtkcm1vbmtleW5pbmphJnF1b3Q7PC90ZD4K
CQk8L3RyPgoJCTx0cj4KCQkJPHRkPnJlbGF0ZWQ8L3RkPgoJCQk8dGQ+Q29tbWEgc2VwYXJh
dGVkIGxpc3Qgb2YgcmVsYXRlZCBUd2l0dGVyIHVzZXJzIHRvIHJlY29tbWVuZCBmb2xsb3dp
bmc8L3RkPgoJCQk8dGQ+IDxlbT51bnNldDwvZW0+PC90ZD4KCQkJPHRkPnJlbGF0ZWQ9JnF1
b3Q7dGV4dHBhdHRlcm4sIHR3aXR0ZXImcXVvdDs8L3RkPgoJCTwvdHI+Cgk8L3RhYmxlPgoK
CTxoMiBjbGFzcz0ic2VjdGlvbiI+VGhlIGFyY190d2l0dGVyX2ludGVudF9yZXBseSB0YWc8
L2gyPgoKCTxoMz5TeW50YXg8L2gzPgoKCTxwPiZsdDt0eHA6YXJjX3R3aXR0ZXJfaW50ZW50
X3JlcGx5Jmd0O1JlcGx5Jmx0Oy90eHA6YXJjX3R3aXR0ZXJfaW50ZW50X3JlcGx5Jmd0Ozwv
cD4KCgk8aDM+VXNhZ2U8L2gzPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRyaWJ1dGU8
L3RoPgoJCQk8dGg+RGVzY3JpcHRpb248L3RoPgoJCQk8dGg+RGVmYXVsdDwvdGg+CgkJCTx0
aD5FeGFtcGxlPC90aD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPmlkPC90ZD4KCQkJPHRkPlR3
ZWV0IGlkIHRvIHJlcGx5IHRvPC90ZD4KCQkJPHRkPiA8ZW0+YXJ0aWNsZSYjODIxNztzIGFz
c29jaWF0ZWQgdHdlZXQgZnJvbSBhcmNfdHdpdHRlcjwvZW0+PC90ZD4KCQk8L3RyPgoJCTx0
cj4KCQkJPHRkPnVzZXI8L3RkPgoJCQk8dGQ+VHdpdHRlciB1c2VyIG5hbWUgcmVsYXRlZCB0
byB0d2VldCAodXNlZCBmb3IgcmVjb21tZW5kZWQgYWNjb3VudHMpPC90ZD4KCQkJPHRkPiA8
ZW0+YXJjX3R3aXR0ZXIgdXNlcm5hbWU8L2VtPjwvdGQ+CgkJCTx0ZD51c2VyPSZxdW90O2Ry
bW9ua2V5bmluamEmcXVvdDs8L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+cmVsYXRlZDwv
dGQ+CgkJCTx0ZD5Db21tYSBzZXBhcmF0ZWQgbGlzdCBvZiByZWxhdGVkIFR3aXR0ZXIgdXNl
cnMgdG8gcmVjb21tZW5kIGZvbGxvd2luZzwvdGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48
L3RkPgoJCQk8dGQ+cmVsYXRlZD0mcXVvdDt0ZXh0cGF0dGVybiwgdHdpdHRlciZxdW90Ozwv
dGQ+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD50ZXh0PC90ZD4KCQkJPHRkPlNldCBzb21lIHRl
eHQgZm9yIHRoZSByZXBseSB0d2VldDwvdGQ+CgkJCTx0ZD4gPGVtPnVuc2V0PC9lbT48L3Rk
PgoJCTwvdHI+Cgk8L3RhYmxlPgoKCTxoMiBjbGFzcz0ic2VjdGlvbiI+TGFuZ3VhZ2U8L2gy
PgoKCTxwPkFsbCB0aGUgYXJjX3R3aXR0ZXJfaW50ZW50cyB0YWdzIGhhdmUgYW4gb3B0aW9u
YWwgJiM4MjIwO2xhbmcmIzgyMjE7IGF0dHJpYnV0ZSBmb3Igc2V0dGluZyB0aGUgbGFuZ3Vh
Z2Ugb2YgdGhlIFR3aXR0ZXIgaW50ZXJmYWNlLiBUaGUgZm9sbG93aW5nIHZhbHVlcy9sYW5n
dWFnZXMgYXJlIGF2YWlsYWJsZTotPC9wPgoKCTx0YWJsZT4KCQk8dHI+CgkJCTx0aD5BdHRy
aWJ1dGUgdmFsdWU8L3RoPgoJCQk8dGg+TGFuZ3VhZ2U8L3RoPgoJCTwvdHI+CgkJPHRyPgoJ
CQk8dGQ+ZW48L3RkPgoJCQk8dGQ+RW5nbGlzaCAoZGVmYXVsdCk8L3RkPgoJCTwvdHI+CgkJ
PHRyPgoJCQk8dGQ+ZnI8L3RkPgoJCQk8dGQ+RnJlbmNoPC90ZD4KCQk8L3RyPgoJCTx0cj4K
CQkJPHRkPml0PC90ZD4KCQkJPHRkPkl0YWxpYW48L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8
dGQ+ZXM8L3RkPgoJCQk8dGQ+U3BhbmlzaDwvdGQ+CgkJPC90cj4KCQk8dHI+CgkJCTx0ZD5r
bzwvdGQ+CgkJCTx0ZD5Lb3JlYW48L3RkPgoJCTwvdHI+CgkJPHRyPgoJCQk8dGQ+anA8L3Rk
PgoJCQk8dGQ+SmFwYW5lc2U8L3RkPgoJCTwvdHI+Cgk8L3RhYmxlPgoKCTxoMiBjbGFzcz0i
c2VjdGlvbiI+SmF2YVNjcmlwdDwvaDI+CgoJPHA+QWxsIHRoZSBhcmNfdHdpdHRlcl9pbnRl
bnRzIHRhZ3MgaGF2ZSB0d28gb3B0aW9uYWwgYXR0cmlidXRlcyB0aGF0IHJlbGF0ZSB0byB0
aGUgaW5jbHVzaW9uIG9mIHRoZSBUd2l0dGVyIHdpZGdldCBKYXZhU2NyaXB0LjwvcD4KCgk8
dGFibGU+CgkJPHRyPgoJCQk8dGg+QXR0cmlidXRlPC90aD4KCQkJPHRoPkRlc2NyaXB0aW9u
PC90aD4KCQkJPHRoPkRlZmF1bHQ8L3RoPgoJCQk8dGg+RXhhbXBsZTwvdGg+CgkJPC90cj4K
CQk8dHI+CgkJCTx0ZD5pbmNsdWRlX2pzPC90ZD4KCQkJPHRkPkluY2x1ZGUgdGhlIFR3aXR0
ZXIgd2lkZ2V0IEphdmFTY3JpcHQ8L3RkPgoJCQk8dGQ+dHJ1ZTwvdGQ+CgkJCTx0ZD5pbmNs
dWRlX2pzPSZxdW90O2ZhbHNlJnF1b3Q7PC90ZD4KCQk8L3RyPgoJCTx0cj4KCQkJPHRkPm9w
dGltaXNlX2pzPC90ZD4KCQkJPHRkPk9wdGltaXNlIHRoZSBKYXZhU2NyaXB0IGJ5IHVzaW5n
IGEgbG9jYWwgc2NyaXB0IHJhdGhlciB0aGFuIHRoYXQgaG9zdGVkIG9uIHRoZSBUd2l0dGVy
IHNpdGU8L3RkPgoJCQk8dGQ+ZmFsc2U8L3RkPgoJCQk8dGQ+b3B0aW1pc2VfanM9JnF1b3Q7
dHJ1ZSZxdW90OzwvdGQ+CgkJPC90cj4KCTwvdGFibGU+CgoJPHA+PHNwYW4gY2xhc3M9ImNh
cHMiPlRYUDwvc3Bhbj4gVHdlZXQgd2lsbCBvbmx5IGluY2x1ZGUgdGhlIHdpZGdldCBKYXZh
U2NyaXB0IG9uY2Ugb24gYSBwYWdlIHJlZ2FyZGxlc3Mgb2YgdGhlIG51bWJlciBvZiB0YWdz
IHVzZWQgdGhhdCBpbmNsdWRlIGl0LjwvcD4KCiI7czo0OiJjb2RlIjtzOjQ0OTg6Imdsb2Jh
bCAkcHJlZnMsJHR4cGNmZzsKCi8vIGFyY190d2l0dGVyX2ludGVudHMgcmVxdWlyZXMgYXJj
X3R3aXR0ZXIgdjMgb3IgaGlnaGVyCnJlcXVpcmVfcGx1Z2luKCdhcmNfdHdpdHRlcicpOwoK
ZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X2ZvbGxvdygkYXR0cywgJHRoaW5nPW51bGwp
CnsKICAgIGdsb2JhbCAkcHJlZnM7CgogICAgZXh0cmFjdChsQXR0cyhhcnJheSgKICAgICAg
ICAndXNlcicgICAgICA9PiAkcHJlZnNbJ2FyY190d2l0dGVyX3VzZXInXSwKICAgICAgICAn
dXNlcl9pZCcgICA9PiAnJywKICAgICAgICAnbGFuZycgICAgICA9PiAnJywKICAgICAgICAn
aW5jbHVkZV9qcyc9PiB0cnVlLAogICAgICAgICdvcHRpbWlzZV9qcycgPT4gZmFsc2UsCiAg
ICAgICAgJ2NsYXNzJyAgICAgPT4gJycKICAgICksJGF0dHMpKTsKCiAgICAkcSA9ICgkdXNl
cl9pZCkgPyAndXNlcl9pZD0nLiR1c2VyX2lkIDogJ3NjcmVlbl9uYW1lPScuJHVzZXI7Cgog
ICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJfaW50ZW50c19sYW5nKCRsYW5nKTsKICAgICRxIC49
ICcmYW1wO2xhbmc9Jy51cmxlbmNvZGUoJGxhbmcpOwoKICAgICR0aGluZyA9ICgkdGhpbmc9
PT1udWxsKSA/ICdGb2xsb3cnIDogcGFyc2UoJHRoaW5nKTsKCiAgICAkaHRtbCA9IGhyZWYo
JHRoaW5nLCdodHRwOi8vdHdpdHRlci5jb20vaW50ZW50L3VzZXI/Jy4kcQogICAgICAsICcg
Y2xhc3M9IicuJGNsYXNzLiciJyk7CgogICAgJGpzID0gKCRpbmNsdWRlX2pzKSA/IF9hcmNf
dHdpdHRlcl93aWRnZXRfanMoJG9wdGltaXNlX2pzP3RydWU6ZmFsc2UpIDogJyc7CgogICAg
cmV0dXJuICRqcy4kaHRtbDsKfQoKZnVuY3Rpb24gYXJjX3R3aXR0ZXJfaW50ZW50X2Zhdm9y
aXRlKCRhdHRzLCAkdGhpbmc9bnVsbCkKewogICAgZ2xvYmFsICRwcmVmcywgJHRoaXNhcnRp
Y2xlOwoKICAgIGV4dHJhY3QobEF0dHMoYXJyYXkoCiAgICAgICAgJ3VzZXInICAgICAgPT4g
JHByZWZzWydhcmNfdHdpdHRlcl91c2VyJ10sCiAgICAgICAgJ3JlbGF0ZWQnICAgPT4gJycs
CiAgICAgICAgJ2luY2x1ZGVfanMnPT4gdHJ1ZSwKICAgICAgICAnb3B0aW1pc2VfanMnID0+
IGZhbHNlLAogICAgICAgICdsYW5nJyAgICAgID0+ICcnLAogICAgICAgICdpZCcgICAgICAg
ID0+ICcnLAogICAgICAgICdjbGFzcycgICAgID0+ICcnCiAgICApLCRhdHRzKSk7CgogICAg
aWYgKCRpZCB8fCAkdGhpc2FydGljbGVbJ3RoaXNpZCddKSB7CgogICAgICAkcSA9ICdyZWxh
dGVkPScuJHVzZXI7CiAgICAgIGlmICgkcmVsYXRlZCkgJHEgLj0gdXJsZW5jb2RlKCgkcT8n
LCc6J3JlbGF0ZWQ9JykuJHJlbGF0ZWQpOwoKICAgICAgaWYgKCEkaWQpIHsKICAgICAgICAk
cm93ID0gc2FmZV9yb3coInR3ZWV0X2lkIgogICAgICAgICwgJ2FyY190d2l0dGVyJywgImFy
dGljbGVfaWQ9eyR0aGlzYXJ0aWNsZVsndGhpc2lkJ119Iik7CiAgICAgICAgaWYgKCEkaWQg
PSAkcm93Wyd0d2VldF9pZCddKSByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgICRxIC49
ICcmYW1wO3R3ZWV0X2lkPScuJGlkOwoKICAgICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJfaW50
ZW50c19sYW5nKCRsYW5nKTsKICAgICAgJHEgLj0gJyZhbXA7bGFuZz0nLnVybGVuY29kZSgk
bGFuZyk7CgogICAgICAkdGhpbmcgPSAoJHRoaW5nPT09bnVsbCkgPyAnRmF2b3JpdGUnIDog
cGFyc2UoJHRoaW5nKTsKCiAgICAgICRodG1sID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0
dGVyLmNvbS9pbnRlbnQvZmF2b3JpdGU/Jy4kcQogICAgICAgICwgJyBjbGFzcz0iJy4kY2xh
c3MuJyInKTsKCiAgICAgICRqcyA9ICgkaW5jbHVkZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lk
Z2V0X2pzKCRvcHRpbWlzZV9qcz90cnVlOmZhbHNlKSA6ICcnOwoKICAgICAgcmV0dXJuICRq
cy4kaHRtbDsKCiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBhcmNfdHdp
dHRlcl9pbnRlbnRfcmV0d2VldCgkYXR0cywgJHRoaW5nPW51bGwpCnsKICAgIGdsb2JhbCAk
cHJlZnMsICR0aGlzYXJ0aWNsZTsKCiAgICBleHRyYWN0KGxBdHRzKGFycmF5KAogICAgICAg
ICd1c2VyJyAgICAgID0+ICRwcmVmc1snYXJjX3R3aXR0ZXJfdXNlciddLAogICAgICAgICdy
ZWxhdGVkJyAgID0+ICcnLAogICAgICAgICdpbmNsdWRlX2pzJz0+IHRydWUsCiAgICAgICAg
J29wdGltaXNlX2pzJyA9PiBmYWxzZSwKICAgICAgICAnbGFuZycgICAgICA9PiAnJywKICAg
ICAgICAnaWQnICAgICAgICA9PiAnJywKICAgICAgICAnY2xhc3MnICAgICA9PiAnJwogICAg
KSwkYXR0cykpOwoKICAgIGlmICgkaWQgfHwgJHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoK
ICAgICAgJHEgPSAncmVsYXRlZD0nLiR1c2VyOwogICAgICBpZiAoJHJlbGF0ZWQpICRxIC49
IHVybGVuY29kZSgoJHE/JywnOidyZWxhdGVkPScpLiRyZWxhdGVkKTsKCiAgICAgIGlmICgh
JGlkKSB7CiAgICAgICAgJHJvdyA9IHNhZmVfcm93KCJ0d2VldF9pZCIKICAgICAgICAsICdh
cmNfdHdpdHRlcicsICJhcnRpY2xlX2lkPXskdGhpc2FydGljbGVbJ3RoaXNpZCddfSIpOwog
ICAgICAgIGlmICghJGlkID0gJHJvd1sndHdlZXRfaWQnXSkgcmV0dXJuIGZhbHNlOwogICAg
ICB9CgogICAgICAkcSAuPSAnJmFtcDt0d2VldF9pZD0nLiRpZDsKCiAgICAgICRsYW5nID0g
X2FyY190d2l0dGVyX2ludGVudHNfbGFuZygkbGFuZyk7CiAgICAgICRxIC49ICcmYW1wO2xh
bmc9Jy51cmxlbmNvZGUoJGxhbmcpOwoKICAgICAgJHRoaW5nID0gKCR0aGluZz09PW51bGwp
ID8gJ1JldHdlZXQnIDogcGFyc2UoJHRoaW5nKTsKCiAgICAgICRodG1sID0gaHJlZigkdGhp
bmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRlbnQvcmV0d2VldD8nLiRxCiAgICAgICAgLCAn
IGNsYXNzPSInLiRjbGFzcy4nIicpOwoKICAgICAgJGpzID0gKCRpbmNsdWRlX2pzKSA/IF9h
cmNfdHdpdHRlcl93aWRnZXRfanMoJG9wdGltaXNlX2pzP3RydWU6ZmFsc2UpIDogJyc7Cgog
ICAgICByZXR1cm4gJGpzLiRodG1sOwoKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7Cn0KCmZ1
bmN0aW9uIGFyY190d2l0dGVyX2ludGVudF9yZXBseSgkYXR0cywgJHRoaW5nPW51bGwpCnsK
ICAgIGdsb2JhbCAkcHJlZnMsICR0aGlzYXJ0aWNsZTsKCiAgICBleHRyYWN0KGxBdHRzKGFy
cmF5KAogICAgICAgICd1c2VyJyAgICAgID0+ICRwcmVmc1snYXJjX3R3aXR0ZXJfdXNlcidd
LAogICAgICAgICdyZWxhdGVkJyAgID0+ICcnLAogICAgICAgICd0ZXh0JyAgICAgID0+ICcn
LAogICAgICAgICdpbmNsdWRlX2pzJz0+IHRydWUsCiAgICAgICAgJ29wdGltaXNlX2pzJyA9
PiBmYWxzZSwKICAgICAgICAnbGFuZycgICAgICA9PiAnJywKICAgICAgICAnaWQnICAgICAg
ICA9PiAnJywKICAgICAgICAnY2xhc3MnICAgICA9PiAnJwogICAgKSwkYXR0cykpOwoKICAg
IGlmICgkaWQgfHwgJHRoaXNhcnRpY2xlWyd0aGlzaWQnXSkgewoKICAgICAgaWYgKCEkaWQp
IHsKICAgICAgICAkcm93ID0gc2FmZV9yb3coInR3ZWV0X2lkIgogICAgICAgICwgJ2FyY190
d2l0dGVyJywgImFydGljbGVfaWQ9eyR0aGlzYXJ0aWNsZVsndGhpc2lkJ119Iik7CiAgICAg
ICAgaWYgKCEkaWQgPSAkcm93Wyd0d2VldF9pZCddKSByZXR1cm4gZmFsc2U7CiAgICAgIH0K
CiAgICAgICRxID0gJ2luX3JlcGx5X3RvPScuJGlkOwoKICAgICAgaWYgKCR1c2VyKSB7CiAg
ICAgICAgJHEgLj0gJyZhbXA7cmVsYXRlZD0nLnVybGVuY29kZSgkdXNlcik7CiAgICAgIH0K
ICAgICAgaWYgKCRyZWxhdGVkKSB7CiAgICAgICAgJHEgLj0gdXJsZW5jb2RlKCgkdXNlcj8n
LCc6JyZyZWxhdGVkPScpLiRyZWxhdGVkKTsKICAgICAgfQogICAgICBpZiAoJHRleHQpIHsK
ICAgICAgICAkcSAuPSAnJmFtcDt0ZXh0PScudXJsZW5jb2RlKCR0ZXh0KTsKICAgICAgfQoK
ICAgICAgJGxhbmcgPSBfYXJjX3R3aXR0ZXJfaW50ZW50c19sYW5nKCRsYW5nKTsKICAgICAg
JHEgLj0gJyZhbXA7bGFuZz0nLnVybGVuY29kZSgkbGFuZyk7CgogICAgICAkdGhpbmcgPSAo
JHRoaW5nPT09bnVsbCkgPyAnUmVwbHknIDogcGFyc2UoJHRoaW5nKTsKCiAgICAgICRodG1s
ID0gaHJlZigkdGhpbmcsJ2h0dHA6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/Jy4kcQog
ICAgICAgICwgJyBjbGFzcz0iJy4kY2xhc3MuJyInKTsKCiAgICAgICRqcyA9ICgkaW5jbHVk
ZV9qcykgPyBfYXJjX3R3aXR0ZXJfd2lkZ2V0X2pzKCRvcHRpbWlzZV9qcz90cnVlOmZhbHNl
KSA6ICcnOwoKICAgICAgcmV0dXJuICRqcy4kaHRtbDsKCiAgICB9CgogICAgcmV0dXJuIGZh
bHNlOwp9CgovKgogKiBTZXQgdGhlIGludGVudCBsYW5ndWFnZQogKi8KZnVuY3Rpb24gX2Fy
Y190d2l0dGVyX2ludGVudHNfbGFuZygkbGFuZz0nZW4nKQp7CiAgJGxhbmcgPSBzdHJ0b2xv
d2VyKCRsYW5nKTsKICAkbGFuZ3MgPSBhcnJheSgnZW4nLCAnaXQnLCAnZXMnLCAnZnInLCAn
a28nLCAnanAnKTsKICByZXR1cm4gKGluX2FycmF5KCRsYW5nLCRsYW5ncykpID8gJGxhbmcg
OiAnZW4nOwp9CgoiO3M6MzoibWQ1IjtzOjMyOiIxM2I1MTZiMjdkODk0OTdlNDNlMzdmNmIw
MTc5NWEzYyI7fQ==
